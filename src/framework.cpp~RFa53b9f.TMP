#include "framework.h"

namespace AC_SensorModels
{
	Framework::Framework()
	{

	}

	bool Framework::Initialise()
	{
		/* Allocate sensor pointers */
		_sensors.push_back(Altimeter());
		return true;
	}

	bool Framework::Frame()
	{
		return true;
	}

	bool Framework::ProcessDataDirectory(const char* dataDirectory)
	{
		/* look for sensor config files in directory*/
		tinydir_dir dir;
		tinydir_open(&dir, dataDirectory);

		while (dir.has_next)
		{
			tinydir_file dirFile;
			tinydir_readfile(&dir, &dirFile);

			tinyxml2::XMLDocument doc;
			doc.LoadFile(dirFile.name);

			doc.FirstChildElement("sensor")->FirstChildElement("network")->Attribute("ipaddress");
			printf("%s", dirFile.name);

			tinydir_next(&dir);
		}

		tinydir_close(&dir);
	}
}